---
description: Deploy to fs-dev after inventory app or MCP changes; local Docker rebuild is optional
alwaysApply: true
---

# Deploy to fs-dev after code changes

We are **not using the local Docker container** for running the app; the lab runs on **fs-dev (192.168.4.100)**. When you change code that runs in the lab containers, **deploy to fs-dev** so the server builds and runs the new code.

## When to deploy

- Any changes under **inventory/app/** (Flask app, config, static, templates)
- Any changes under **mcp-server/** (MCP server source or config) — if MCP is run on fs-dev
- **Any changes to Docker logic** — Dockerfile(s), `docker/cyber-lab-compose.yml`, `docker/cyber-lab-fs-dev.override.yml`, or other compose/override files used for the lab stack. Always sync and rebuild on fs-dev so the running containers match the new logic.

## How to deploy (primary)

From the **repo root**:

```bash
./scripts/deploy-cyber-lab-to-fs-dev.sh andrew@192.168.4.100
```

This syncs the repo to fs-dev and runs `docker compose -f docker/cyber-lab-compose.yml -f docker/cyber-lab-fs-dev.override.yml up -d --build` on the server. The **build runs on fs-dev**; no local Docker needed.

Then open **http://192.168.4.100:5050** in a browser.

## Local Docker (optional)

If you want to run or build containers **locally** (e.g. for testing without fs-dev):

```bash
./scripts/rebuild-containers.sh
docker compose -f inventory/app/docker-compose.yml up -d
```

Local rebuild is **optional**; the primary workflow is deploy to fs-dev.
